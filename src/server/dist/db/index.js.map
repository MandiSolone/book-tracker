{"version":3,"file":"index.js","names":["config","mysql","url","connection","process","env","NODE_ENV","clearDBUrl","CLEARDB_DATABASE_URL","Error","_url$URL","URL","hostname","username","password","pathname","database","slice","createPool","host","user"],"sources":["../../db/index.js"],"sourcesContent":["import config from \"../config/index.js\"; // local config file\nimport mysql from \"mysql\"; // Default built in component\nimport url from \"url\"; // URL module for parsing, built in Node mod\n\n// const connection = mysql.createPool(config.mysql);\n\n// let connection;\n\n// if (process.env.NODE_ENV === 'production') {\n//     // Use ClearDB_DATABASE_URL from Heroku\n//     const clearDBUrl = process.env.CLEARDB_DATABASE_URL;\n\n//     // Create a connection pool from the ClearDB URL\n//     connection = mysql.createPool({\n//       uri: clearDBUrl,\n//       // Note: May need to parse the URL if using mysql2\n//     });\n//   } else {\n//     // Use local MySQL config\n//     connection = mysql.createPool(config.mysql);\n//   }\n\nvar connection;\n\nif (process.env.NODE_ENV === 'production') {\n  // Use ClearDB_DATABASE_URL from Heroku\n  var clearDBUrl = process.env.CLEARDB_DATABASE_URL;\n\n  if (!clearDBUrl) {\n    throw new Error(\"CLEARDB_DATABASE_URL is not defined\");\n  }\n\n  var _url$URL = new url.URL(clearDBUrl),hostname = _url$URL.hostname,username = _url$URL.username,password = _url$URL.password,pathname = _url$URL.pathname;\n  var database = pathname.slice(1); // Remove leading '/'\n\n  connection = mysql.createPool({\n    host: hostname,\n    user: username,\n    password: password,\n    database: database\n  });\n} else {\n  // Use local MySQL config\n  connection = mysql.createPool(config.mysql);\n}\n\nexport default connection; // import connection to utils (wrap in promise)> export as query\n//# sourceMappingURL=index.js.map"],"mappings":"AAAA,OAAOA,MAAM,MAAM,oBAAoB,CAAC,CAAC;AACzC,OAAOC,KAAK,MAAM,OAAO,CAAC,CAAC;AAC3B,OAAOC,GAAG,MAAM,KAAK,CAAC,CAAC;;AAEvB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,UAAU;;AAEd,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;EACzC;EACA,IAAIC,UAAU,GAAGH,OAAO,CAACC,GAAG,CAACG,oBAAoB;;EAEjD,IAAI,CAACD,UAAU,EAAE;IACf,MAAM,IAAIE,KAAK,CAAC,qCAAqC,CAAC;EACxD;;EAEA,IAAIC,QAAQ,GAAG,IAAIR,GAAG,CAACS,GAAG,CAACJ,UAAU,CAAC,CAACK,QAAQ,GAAGF,QAAQ,CAACE,QAAQ,CAACC,QAAQ,GAAGH,QAAQ,CAACG,QAAQ,CAACC,QAAQ,GAAGJ,QAAQ,CAACI,QAAQ,CAACC,QAAQ,GAAGL,QAAQ,CAACK,QAAQ;EAC1J,IAAIC,QAAQ,GAAGD,QAAQ,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;EAElCd,UAAU,GAAGF,KAAK,CAACiB,UAAU,CAAC;IAC5BC,IAAI,EAAEP,QAAQ;IACdQ,IAAI,EAAEP,QAAQ;IACdC,QAAQ,EAAEA,QAAQ;IAClBE,QAAQ,EAAEA;EACZ,CAAC,CAAC;AACJ,CAAC,MAAM;EACL;EACAb,UAAU,GAAGF,KAAK,CAACiB,UAAU,CAAClB,MAAM,CAACC,KAAK,CAAC;AAC7C;;AAEA,eAAeE,UAAU,CAAC,CAAC","ignoreList":[]}
{"version":3,"file":"index.js","names":["config","mysql","url","connection","process","env","NODE_ENV","clearDBUrl","CLEARDB_DATABASE_URL","Error","_url$URL","URL","hostname","username","password","pathname","database","slice","createPool","host","user"],"sources":["../../db/index.js"],"sourcesContent":["import config from \"../config/index.js\";// local config file\nimport mysql from \"mysql\";// Default built in component\nimport url from \"url\"; // URL module for parsing, built in Node mod\n\n// const connection = mysql.createPool(config.mysql);\n\n// let connection;\n\n// if (process.env.NODE_ENV === 'production') {\n//     // Use ClearDB_DATABASE_URL from Heroku\n//     const clearDBUrl = process.env.CLEARDB_DATABASE_URL;\n  \n//     // Create a connection pool from the ClearDB URL\n//     connection = mysql.createPool({\n//       uri: clearDBUrl,\n//       // Note: May need to parse the URL if using mysql2\n//     });\n//   } else {\n//     // Use local MySQL config\n//     connection = mysql.createPool(config.mysql);\n//   }\n\nlet connection;\n\nif (process.env.NODE_ENV === 'production') {\n    // Use ClearDB_DATABASE_URL from Heroku\n    const clearDBUrl = process.env.CLEARDB_DATABASE_URL;\n\n    if (!clearDBUrl) {\n        throw new Error(\"CLEARDB_DATABASE_URL is not defined\");\n    }\n\n    const { hostname, username, password, pathname } = new url.URL(clearDBUrl);\n    const database = pathname.slice(1); // Remove leading '/'\n    \n    connection = mysql.createPool({\n        host: hostname,\n        user: username,\n        password: password,\n        database: database,\n    });\n} else {\n    // Use local MySQL config\n    connection = mysql.createPool(config.mysql);\n}\n\nexport default connection; // import connection to utils (wrap in promise)> export as query"],"mappings":"AAAA,OAAOA,MAAM,MAAM,oBAAoB,CAAC;AACxC,OAAOC,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAOC,GAAG,MAAM,KAAK,CAAC,CAAC;;AAEvB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,UAAU;;AAEd,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;EACvC;EACA,IAAMC,UAAU,GAAGH,OAAO,CAACC,GAAG,CAACG,oBAAoB;;EAEnD,IAAI,CAACD,UAAU,EAAE;IACb,MAAM,IAAIE,KAAK,CAAC,qCAAqC,CAAC;EAC1D;;EAEA,IAAAC,QAAA,GAAmD,IAAIR,GAAG,CAACS,GAAG,CAACJ,UAAU,CAAC,CAAlEK,QAAQ,GAAAF,QAAA,CAARE,QAAQ,CAAEC,QAAQ,GAAAH,QAAA,CAARG,QAAQ,CAAEC,QAAQ,GAAAJ,QAAA,CAARI,QAAQ,CAAEC,QAAQ,GAAAL,QAAA,CAARK,QAAQ;EAC9C,IAAMC,QAAQ,GAAGD,QAAQ,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEpCd,UAAU,GAAGF,KAAK,CAACiB,UAAU,CAAC;IAC1BC,IAAI,EAAEP,QAAQ;IACdQ,IAAI,EAAEP,QAAQ;IACdC,QAAQ,EAAEA,QAAQ;IAClBE,QAAQ,EAAEA;EACd,CAAC,CAAC;AACN,CAAC,MAAM;EACH;EACAb,UAAU,GAAGF,KAAK,CAACiB,UAAU,CAAClB,MAAM,CAACC,KAAK,CAAC;AAC/C;;AAEA,eAAeE,UAAU,CAAC,CAAC","ignoreList":[]}
{"version":3,"file":"books.controllers.js","names":["findAll","_exports","_ref2","_asyncToGenerator2","_regenerator","mark","_callee","_ref","user_id","sql","params","results","wrap","_callee$","_context","prev","next","query","sent","abrupt","stop","_x","apply","arguments","findOne","_ref3","_callee2","book_id","_callee2$","_context2","length","_x2","_x3","addOne","_ref4","_callee3","newBook","result","bookWithId","_callee3$","_context3","_objectSpread","insertId","_x4","updateOne","_ref5","_callee4","updatedBook","_callee4$","_context4","title","authors","comments","link","image","type","location","status","rating","_x5","_x6","_x7","removeOne","_ref6","_callee5","bookID","_callee5$","_context5","_x8","_default"],"sources":["../../controllers/books.controllers.js"],"sourcesContent":["import query from \"../db/utils\";// Connects mysql wrapped in a promise from db query\n\nexport const findAll = async ({ user_id }) => {\n  const sql = \"SELECT * FROM books WHERE user_id = ?\";\n  const params = [user_id];\n  const results = await query(sql, params);\n  return results;\n};\n\nconst findOne = async (book_id, user_id) => {\n  const sql = \"SELECT * FROM books WHERE book_id = ? AND user_id = ?\";\n  const params = [book_id, user_id];\n  const results = await query(sql, params);\n  // Return the first result, or null if not found\n  return results.length > 0 ? results[0] : null;\n};\n\nconst addOne = async (newBook) => {\n  const sql = \"INSERT INTO books SET ?\"; // No need for WHERE clause here\n  const params = newBook; // Directly use the newBook object\n  const result = await query(sql, params);\n\n  // Construct the new book object including its ID\n  const bookWithId = {\n    book_id: result.insertId, // Use insertId from the result\n    ...newBook,\n  };\n  return bookWithId; // Return the new book object\n};\n\nconst updateOne = async (updatedBook, book_id, user_id) => {\n  const sql =\n    \"UPDATE books SET title = ?, authors = ?, comments = ?, link = ?, image = ?, type = ?, location = ?, status = ?, rating = ?, user_id = ? WHERE book_id = ?\";\n  const params = [\n    updatedBook.title,\n    updatedBook.authors,\n    updatedBook.comments,\n    updatedBook.link,\n    updatedBook.image,\n    updatedBook.type,\n    updatedBook.location,\n    updatedBook.status,\n    updatedBook.rating,\n    user_id,\n    book_id,\n  ];\n\n  const result = await query(sql, params);\n  return result;\n};\n\nconst removeOne = async (bookID) => {\n  return await query(\"DELETE FROM books WHERE book_id = ?\", [bookID]);\n};\n\nexport default {\n  findAll,\n  findOne,\n  addOne,\n  updateOne,\n  removeOne,\n};\n"],"mappings":"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","ignoreList":[]}
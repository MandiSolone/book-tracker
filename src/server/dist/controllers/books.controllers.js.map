{"version":3,"file":"books.controllers.js","names":["query","findAll","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","user_id","sql","params","results","wrap","_callee$","_context","prev","next","sent","abrupt","stop","_x","apply","arguments","findOne","_ref3","_callee2","book_id","_callee2$","_context2","length","_x2","_x3","addOne","_ref4","_callee3","newBook","result","bookWithId","_callee3$","_context3","_objectSpread","insertId","_x4","updateOne","_ref5","_callee4","updatedBook","_callee4$","_context4","title","authors","comments","link","image","type","location","status","rating","_x5","_x6","_x7","removeOne","_ref6","_callee5","bookID","_callee5$","_context5","_x8"],"sources":["../../controllers/books.controllers.js"],"sourcesContent":["import query from \"../db/utils.js\"; // Connects mysql wrapped in a promise from db query\n\nexport const findAll = async ({ user_id }) => {\n  const sql = \"SELECT * FROM books WHERE user_id = ?\";\n  const params = [user_id];\n  const results = await query(sql, params);\n  return results;\n};\n\nconst findOne = async (book_id, user_id) => {\n  const sql = \"SELECT * FROM books WHERE book_id = ? AND user_id = ?\";\n  const params = [book_id, user_id];\n  const results = await query(sql, params);\n  // Return the first result, or null if not found\n  return results.length > 0 ? results[0] : null;\n};\n\nconst addOne = async (newBook) => {\n  const sql = \"INSERT INTO books SET ?\"; // No need for WHERE clause here\n  const params = newBook; // Directly use the newBook object\n  const result = await query(sql, params);\n\n  // Construct the new book object including its ID\n  const bookWithId = {\n    book_id: result.insertId, // Use insertId from the result\n    ...newBook,\n  };\n  return bookWithId; // Return the new book object\n};\n\nconst updateOne = async (updatedBook, book_id, user_id) => {\n  const sql =\n    \"UPDATE books SET title = ?, authors = ?, comments = ?, link = ?, image = ?, type = ?, location = ?, status = ?, rating = ?, user_id = ? WHERE book_id = ?\";\n  const params = [\n    updatedBook.title,\n    updatedBook.authors,\n    updatedBook.comments,\n    updatedBook.link,\n    updatedBook.image,\n    updatedBook.type,\n    updatedBook.location,\n    updatedBook.status,\n    updatedBook.rating,\n    user_id,\n    book_id,\n  ];\n\n  const result = await query(sql, params);\n  return result;\n};\n\nconst removeOne = async (bookID) => {\n  return await query(\"DELETE FROM books WHERE book_id = ?\", [bookID]);\n};\n\nexport default {\n  findAll,\n  findOne,\n  addOne,\n  updateOne,\n  removeOne,\n};\n"],"mappings":"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","ignoreList":[]}
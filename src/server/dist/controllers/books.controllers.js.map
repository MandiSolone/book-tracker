{"version":3,"file":"books.controllers.js","names":["query","findAll","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","user_id","sql","params","results","wrap","_callee$","_context","prev","next","sent","abrupt","stop","_x","apply","arguments","findOne","_ref3","_callee2","book_id","_callee2$","_context2","length","_x2","_x3","addOne","_ref4","_callee3","newBook","result","bookWithId","_callee3$","_context3","_objectSpread","insertId","t0","console","error","_x4","updateOne","_ref5","_callee4","updatedBook","_callee4$","_context4","title","authors","comments","link","image","type","location","status","rating","_x5","_x6","_x7","removeOne","_ref6","_callee5","bookID","_callee5$","_context5","_x8"],"sources":["../../controllers/books.controllers.js"],"sourcesContent":["import query from \"../db/utils.js\"; // Connects mysql wrapped in a promise from db query\n\nexport const findAll = async ({ user_id }) => {\n  const sql = \"SELECT * FROM books WHERE user_id = ?\";\n  const params = [user_id];\n  const results = await query(sql, params);\n  return results;\n};\n\nconst findOne = async (book_id, user_id) => {\n  const sql = \"SELECT * FROM books WHERE book_id = ? AND user_id = ?\";\n  const params = [book_id, user_id];\n  const results = await query(sql, params);\n  // Return the first result, or null if not found\n  return results.length > 0 ? results[0] : null;\n};\n\nconst addOne = async (newBook) => {\n  const sql = \"INSERT INTO books SET ?\"; // No need for WHERE clause here\n  const params = newBook; // Directly use the newBook object\n  try {\n    const result = await query(sql, params);\n    // Construct the new book object including its Id\n    const bookWithId = {\n      book_id: result.insertId,\n      ...newBook,\n    };\n    return bookWithId;\n  } catch (error) {\n    console.error(\"Insert Error:\", error);\n    throw error;\n  }\n};\n\nconst updateOne = async (updatedBook, book_id, user_id) => {\n  const sql =\n    \"UPDATE books SET title = ?, authors = ?, comments = ?, link = ?, image = ?, type = ?, location = ?, status = ?, rating = ?, user_id = ? WHERE book_id = ?\";\n  const params = [\n    updatedBook.title,\n    updatedBook.authors,\n    updatedBook.comments,\n    updatedBook.link,\n    updatedBook.image,\n    updatedBook.type,\n    updatedBook.location,\n    updatedBook.status,\n    updatedBook.rating,\n    user_id,\n    book_id,\n  ];\n\n  const result = await query(sql, params);\n  return result;\n};\n\nconst removeOne = async (bookID) => {\n  return await query(\"DELETE FROM books WHERE book_id = ?\", [bookID]);\n};\n\nexport default {\n  findAll,\n  findOne,\n  addOne,\n  updateOne,\n  removeOne,\n};\n"],"mappings":"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","ignoreList":[]}
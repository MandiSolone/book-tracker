{"version":3,"file":"books.controllers.js","names":["_utils","_interopRequireDefault","require","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","findAll","exports","_ref2","_asyncToGenerator2","_regenerator","mark","_callee","_ref","user_id","sql","params","results","wrap","_callee$","_context","prev","next","query","sent","abrupt","stop","_x","findOne","_ref3","_callee2","book_id","_callee2$","_context2","_x2","_x3","addOne","_ref4","_callee3","newBook","result","bookWithId","_callee3$","_context3","insertId","_x4","updateOne","_ref5","_callee4","updatedBook","_callee4$","_context4","title","authors","comments","link","image","type","location","status","rating","_x5","_x6","_x7","removeOne","_ref6","_callee5","bookID","_callee5$","_context5","_x8","_default"],"sources":["../../controllers/books.controllers.js"],"sourcesContent":["import query from \"../db/utils\";// Connects mysql wrapped in a promise from db query\n\nexport const findAll = async ({ user_id }) => {\n  const sql = \"SELECT * FROM books WHERE user_id = ?\";\n  const params = [user_id];\n  const results = await query(sql, params);\n  return results;\n};\n\nconst findOne = async (book_id, user_id) => {\n  const sql = \"SELECT * FROM books WHERE book_id = ? AND user_id = ?\";\n  const params = [book_id, user_id];\n  const results = await query(sql, params);\n  // Return the first result, or null if not found\n  return results.length > 0 ? results[0] : null;\n};\n\nconst addOne = async (newBook) => {\n  const sql = \"INSERT INTO books SET ?\"; // No need for WHERE clause here\n  const params = newBook; // Directly use the newBook object\n  const result = await query(sql, params);\n\n  // Construct the new book object including its ID\n  const bookWithId = {\n    book_id: result.insertId, // Use insertId from the result\n    ...newBook,\n  };\n  return bookWithId; // Return the new book object\n};\n\nconst updateOne = async (updatedBook, book_id, user_id) => {\n  const sql =\n    \"UPDATE books SET title = ?, authors = ?, comments = ?, link = ?, image = ?, type = ?, location = ?, status = ?, rating = ?, user_id = ? WHERE book_id = ?\";\n  const params = [\n    updatedBook.title,\n    updatedBook.authors,\n    updatedBook.comments,\n    updatedBook.link,\n    updatedBook.image,\n    updatedBook.type,\n    updatedBook.location,\n    updatedBook.status,\n    updatedBook.rating,\n    user_id,\n    book_id,\n  ];\n\n  const result = await query(sql, params);\n  return result;\n};\n\nconst removeOne = async (bookID) => {\n  return await query(\"DELETE FROM books WHERE book_id = ?\", [bookID]);\n};\n\nexport default {\n  findAll,\n  findOne,\n  addOne,\n  updateOne,\n  removeOne,\n};\n"],"mappings":"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","ignoreList":[]}